<?php $_shouldextend[1]=1; ?>

<?php $this->startSection('title', 'Quáº£n lÃ½ BPlayer'); ?>

<?php $this->startSection('content'); ?>
<div class="min-h-screen p-6 transition-colors duration-300">
 
 <?php /* Header: TiÃªu Ä‘á» vÃ  nÃºt chá»©c nÄƒng */ ?>
 <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
 <div>
 <h1 class="text-3xl font-bold text-[#232629] dark:text-[#e3e6e8]">Quáº£n lÃ½ BPlayer</h1>
 <p class="text-sm text-[#525960] dark:text-[#9fa6ad] mt-1">Danh sÃ¡ch táº¥t cáº£ BPlayer trong há»‡ thá»‘ng.</p>
 </div>
 <div>
 <a href="/project/admin/bplayers/pending" class="inline-flex items-center mt-4 sm:mt-0 px-4 py-2 bg-[#f48024] text-white font-semibold text-sm rounded-lg shadow-sm hover:bg-orange-600 transition-colors">
 <i class="fas fa-user-check mr-2"></i>
 Duyá»‡t Ä‘Äƒng kÃ½ má»›i
 </a>
 </div>
 </div>

 <?php /* Báº£ng dá»¯ liá»‡u BPlayer */ ?>
 <div class="bg-white dark:bg-[#2d2d2d] rounded-xl shadow-md overflow-hidden border border-[#d6d9dc] dark:border-[#3f4042]">
 <div class="overflow-x-auto">
 <table class="w-full text-sm text-left text-[#525960] dark:text-[#9fa6ad]">
 <thead class="text-xs text-[#232629] dark:text-[#e3e6e8] uppercase bg-[#f8f9f9] dark:bg-[#232426]">
 <tr>
 <th scope="col" class="px-6 py-4">BPlayer</th>
 <th scope="col" class="px-6 py-4">Games</th>
 <th scope="col" class="px-6 py-4">GiÃ¡ thuÃª / giá»</th>
 <th scope="col" class="px-6 py-4">NgÃ y tham gia</th>
 <th scope="col" class="px-6 py-4">Tráº¡ng thÃ¡i</th>
 <th scope="col" class="px-6 py-4 text-right">HÃ nh Ä‘á»™ng</th>
 </tr>
 </thead>
 <tbody>
 <?php $__empty_1 = true; foreach($bPlayerList as $bplayer): $__empty_1 = false; ?>
 <tr class="border-b border-[#d6d9dc] dark:border-[#3f4042] hover:bg-[#f8f9f9] dark:hover:bg-[#3a3a3a]">
 
 <?php /* Cá»™t BPlayer (Gá»™p Avatar, Nickname, TÃªn tháº­t) */ ?>
 <td class="px-6 py-4">
 <div class="flex items-center gap-3">
 <img src="/project/<?php echo \htmlentities($bplayer['main_image']??'', ENT_QUOTES, 'UTF-8', false); ?>" alt="Avatar" class="w-10 h-10 rounded-full object-cover">
 <div>
 <div class="font-bold text-[#232629] dark:text-white"><?php echo \htmlentities($bplayer['nickname']??'', ENT_QUOTES, 'UTF-8', false); ?></div>
 <div class="text-xs"><?php echo \htmlentities($bplayer['fullname']??'', ENT_QUOTES, 'UTF-8', false); ?></div>
 </div>
 </div>
 </td>
 
 <?php /* Cá»™t Games */ ?>
 <td class="px-6 py-4">
 <div class="flex flex-wrap gap-1">
 <?php $__currentLoopData = json_decode($bplayer['games'], true); $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $game): $loop = $this->incrementLoopIndices();  ?>
 <span class="game-badge"><?php echo \htmlentities(strtoupper($game)??'', ENT_QUOTES, 'UTF-8', false); ?></span>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </div>
 </td>

 <?php /* Cá»™t GiÃ¡ thuÃª */ ?>
 <td class="px-6 py-4 font-semibold text-[#232629] dark:text-white"><?php echo \htmlentities(number_format($bplayer['price_per_hour'])??'', ENT_QUOTES, 'UTF-8', false); ?>ğŸ’</td>
 
 <td class="px-6 py-4"><?php echo \htmlentities(date('d/m/Y', strtotime($bplayer['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>

 <?php /* Cá»™t Tráº¡ng thÃ¡i */ ?>
 <td class="px-6 py-4">
 <?php if($bplayer['status'] == 'approved'): ?>
 <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400">ÄÃ£ duyá»‡t</span>
 <?php elseif($bplayer['status'] == 'pending'): ?>
 <span class="status-badge bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400">Chá» duyá»‡t</span>
 <?php elseif($bplayer['status'] == 'suspended'): ?>
 <span class="status-badge bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400">ÄÃ£ khÃ³a</span>
 <?php endif; ?>
 </td>
 <td class="px-6 py-4 text-right">
 <?php if($bplayer['status'] == 'pending'): ?>
 <form action="/project/admin/bplayers/handle/<?php echo \htmlentities($bplayer['id']??'', ENT_QUOTES, 'UTF-8', false); ?>" method="POST" class="flex items-center justify-end gap-2">
 <button type="submit" name="action" value="reject" class="px-3 py-1.5 text-xs font-semibold text-red-600 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50 rounded-full">
 Tá»« chá»‘i
 </button>
 <button type="submit" name="action" value="approve" class="px-3 py-1.5 text-xs font-semibold text-green-600 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50 rounded-full">
 Cháº¥p nháº­n
 </button>
 </form>
 <?php endif; ?>
 </td>

 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="6" class="text-center py-12 text-base">
 ChÆ°a cÃ³ BPlayer nÃ o trong há»‡ thá»‘ng.
 </td>
 </tr>
 <?php endif; ?>
 </tbody>
 </table>
 </div>
 </div>
</div>
<?php $this->stopSection(); ?>

<?php $this->startPush('styles'); ?>
<style>
 .status-badge { @apply px-2.5 py-1 text-xs font-bold rounded-full; }
 .game-badge { @apply px-2 py-0.5 text-xs font-medium rounded bg-[#e3e6e8] dark:bg-[#3a3a3a] text-[#525960] dark:text-[#9fa6ad]; }
</style>
<?php $this->stopPush(); ?>
<?php if (isset($_shouldextend[1])) { echo $this->runChild('layouts.admin'); } ?>